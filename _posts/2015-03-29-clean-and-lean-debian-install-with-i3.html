---
layout: post
status: publish
published: true
title: Clean and Lean Debian Install with i3
author:
  display_name: Shrimp
  login: shrimp
  email: shrimp@shrimpworks.za.net
  url: http://shrimpworks.za.net/
author_login: shrimp
author_email: shrimp@shrimpworks.za.net
author_url: http://shrimpworks.za.net/
wordpress_id: 694
wordpress_url: http://shrimpworks.za.net/?p=694
date: '2015-03-29 09:33:28 +0200'
date_gmt: '2015-03-29 07:33:28 +0200'
categories:
- Linux
- Work
- Software
tags: []
---
<p><img src="https://upload.wikimedia.org/wikipedia/commons/8/87/I3_window_manager_logo.png" align="left" style="padding-right:15px" /> Recently, I've made the switch from KDE being my preferred Linux desktop environment/window manager, to <a href="http://i3wm.org/">i3</a>, a tiling window manager, for both my work and private development environments (my home desktop is still Windows 7, since I do still game enough for it to become painful to dual-boot - so I do most of my development within a VM these days).</p>
<p>I really like it's absolutely minimal approach - essentially it does nothing itself, it provides a simple window manager, and near limitless configurability. This has proven an excellent learning experience for me, since it's forced me to get a lot closer to system components usually "hidden" behind sliders and widgets in KDE or Gnome, as well as a host of alternatives to applications those environments provide by default. It's also resulted in a much cleaner and faster system, containing only the applications and services I actually want.</p>
<p>We recently installed fresh new desktop machines at work, so I thought I'd share some of my setup, in case it's of some value to anyone else (and my own future reference!). The following steps assume you know how to operate a basic Debian system. I'm not going to go too deep into any usage details for i3 either, since there's an <a href="http://i3wm.org/docs/userguide.html">excellent user guide</a> and <a href="https://faq.i3wm.org/">comprehensive FAQ system</a> which should answer any questions you may have.</p>
<p>I'd also advocate using "aptitude" as an alternative to "apt-get" for all package installations, updates and removals.</p>
<h3>The Basics</h3>
<p>I always start off with a <a href="https://www.debian.org/CD/netinst/">Debian "netinst"</a>. Post-install, this provides an incredibly basic bare-bones OS with a few system utilities (during the installation, de-select the pre-configured "Desktop", "Web Server", "Mail Server", etc. options, just keep the "Standard System Utilities").</p>
<p>First thing to to after installing is <a href="https://wiki.debian.org/sudo">install <code>sudo</code> and add your user to the sudoers group</a>, to avoid having to be root to get things done. Now's also a good time to install <code>vim</code>.</p>
<p>I also like seeing Aptitude's "visual preview" of changes when doing package management, so to avoid having to call <code>$ aptitude --visual-preview install ...</code> on every invocation, we can edit root's aptitude config:</p>
<p><em>/root/.aptitude/config:</em></p>
<pre><code>Aptitude::CmdLine::Visual-Preview "true";</code></pre>
<h4>Upgrade to Unstable/Sid</h4>
<p>Perhaps a bit reckless, but I've honestly never experienced any crippling issues running Debian Unstable ("sid"). You'll only need to modify /etc/apt/source.list and replace references to "wheezy" or "testing" with "unstable" or "sid", and disable the updates and security repositories, leaving you only the main deb and deb-src repositories (I've enabled non-free and contrib, since I want to install FlashPlayer and nVidia drivers later):</p>
<p><em>/etc/apt/source.list:</em></p>
<pre><code>deb http://cdn.debian.net/debian/ unstable main non-free contrib
deb-src http://cdn.debian.net/debian/ unstable main non-free contrib
</code></pre>
<p>After saving the above changes, execute the following:</p>
<pre><code>$ sudo aptitude update
$ sudo aptitude dist-upgrade</code></pre>
<p>The <code>dist-upgrade</code> step will upgrade all installed packages to whatever's newest in unstable.</p>
<h3>Desktop Install</h3>
<p>With the base system as up-to-date as it can be, it's time to install the desktop environment.</p>
<pre><code>$ sudo aptitude install xorg lightdm i3-wm i3status suckless-tools</code></pre>
<p>After installation, I'd reboot and ensure a nice graphical login prompt appears. After login, you'll be asked some initial i3 setup questions (which are easy to change later) and land in the default i3 workspace. Press Mod+Enter (Mod being whatever you selected in the aforementioned setup questions - likely "windows" key, or Ctrl) to open a new terminal window. It's probably <code>xterm</code>, which is sort of OK, but I switched to <code>lxtermial</code> - it's nice and lightweight but still has a fair number of configuration and convenience features (like URL detection - useful for IRC).</p>
<p>If you install another terminal, and opening more terminals results in more xterms rather than your installed terminal, do the following to set your preferred option:</p>
<pre><code>$ sudo update-alternatives --config x-terminal-emulator</code></pre>
<h3>Desktop Tweaks</h3>
<p>Before digging too deep into installing additional software, it's a good time to configure some additional options to make life a bit more pleasant.</p>
<h5>Look and Feel</h5>
<p>In order to make sure your eyes are not offended by the default GTK theme which you may end up seeing a lot of, set up the GTK theme and icon theme:</p>
<p><em>~/.gtkrc-2.0:</em></p>
<pre><code>include "/usr/share/themes/Adwaita/gtk-2.0/gtkrc"
gtk-icon-theme-name="Adwaita"
</code></pre>
<p>In addition, I found it a lot cleaner and space-maximising to disable i3's window titles and thin it's borders down, by addition the following to <em>~/i3/config</em>:</p>
<pre><code>new_window 1pixel
new_float normal
</code></pre>
<h5>py3status</h5>
<p>Install <code>python-pip</code> via Aptitude, and then <code>$ sudo pip install py3status</code>. I use <a href="https://github.com/ultrabug/py3status">py3status</a> since it provides some nice additional modules, is more flexible, and is fully compatible with the default i3status configuration. It's also a good time to check out the <a href="http://i3wm.org/i3status/manpage.html">i3status configuration documentation</a> and do some tweaks, since a couple of the default entries here are likely not too useful.</p>
<h5>Wallpaper</h5>
<p>Randomised (of fixed if preferred) wallpapers can easily be achieved by installing <code>feh</code> (which makes for a good i3-friendly picture viewer in general) then adding the following to <em>~/i3/config</em>:</p>
<pre><code>exec --no-startup-id feh --recursive --randomize --bg-fill ~/Pictures/wallpaper/</code></pre>
<p>Incidentally, the <a href="https://imgur.com/r/wallpaper">imgur wallpaper gallery</a> is a good place to find some wallpapers.</p>
<h5>File Management</h5>
<p>Sometimes a GUI file manager can be useful, and for this, a nice light-weight alternative to the bigger desktops' Nautilus and Dolphins is PCManFM, installed as <code>pcmanfm</code>.</p>
<p>A nice companion application for (compressed) archive management is <code>xarchiver</code>. You may need to install additional tools (such as <code>zip</code>, <code>unzip</code>, <code>unrar-free</code>, etc, depending on the files you commonly work with).</p>
<h3>Conclusion</h3>
<p>The entire setup to this point should not have taken more than 1-2 hours, depending on download speeds (really, most time is spent just waiting for downloads...), so you can get this kind of environment running with minimal effort and downtime.</p>
<p>I haven't included anything about multimedia, custom key bindings, lock screens, or others here, but there are loads of other resources around which can fill you in on those and the myriad ways you can configure your i3 environment.</p>
<p>Your next step, if you're new to i3, should probably be to take a read through the <a href="http://i3wm.org/docs/userguide.html">i3 user guide</a>, which is impressively comprehensive.</p>
