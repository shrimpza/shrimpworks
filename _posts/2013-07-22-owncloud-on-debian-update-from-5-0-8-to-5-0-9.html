---
layout: post
status: publish
published: true
title: ownCloud on Debian update from 5.0.8 to 5.0.9
author:
  display_name: Shrimp
  login: shrimp
  email: shrimp@shrimpworks.za.net
  url: http://shrimpworks.za.net/
author_login: shrimp
author_email: shrimp@shrimpworks.za.net
author_url: http://shrimpworks.za.net/
wordpress_id: 418
wordpress_url: http://shrimpworks.za.net/?p=418
date: '2013-07-22 10:20:58 +0200'
date_gmt: '2013-07-22 08:20:58 +0200'
categories:
- Random
tags: []
---
<p>*Update 1* - one minor upgrade later, and they're back to the previous configuration in <code>/usr/share/owncloud</code>. Joy. Guess I'll give it up.</p>
<p>*Update 2* - ok, so unfortunately I didn't give up, and wow 5.0.10 is back in <code>/var/www/</code>. Double-you tee eff.</p>
<p>I've been trying out hosting my own ownCloud instance on one of my Debian servers, and it's mostly gone pretty well, using their official apt repositories.</p>
<p>On around the 17th of July however, ownCloud published an update from version 5.0.8 to version 5.0.9 which completely broke the system as they changed where everything was installed to. I thought Id write up a couple of pointers to getting things up and running again, if you've suffered the same problem.</p>
<p>Firstly, the application itself has moved from <code>/usr/share/owncloud/</code> to a more conventional <code>/var/www/owncloud/</code>. This means you'll have to update any Apache config you might have done to get it accessible. They removed the original <code>/etc/apache2/conf.d/owncloud.conf</code>, so if you were relying on that, you'd have to create something new and correct in <code>/etc/apache2/sites-available/</code> and symlink it in <code>/etc/apache2/sites-enabled/</code>.</p>
<p>Next, the config configuration has also changed. Previously, the <code>owncloud/config/</code> directory used to be a symlink to <code>/etc/owncloud/</code>, but now they have provided an actual config directory within the ownCloud installation. I removed this directory, and created a symlink to <code>/etc/owncloud/</code> as <code>/var/www/owncloud/config/</code></p>
<p>Once that's all set up, you should be able to load ownCloud in your browser and it should perform an upgrade on the DB. In my case, the upgrade process got stuck in a loop, I presume it's setting a cookie that is not being cleared correctly. The "solution" was to restart my browser.</p>
<p>When you log in thereafter, all your stuff should be present as it were pre-upgrade.</p>
<p>It's probably also a good idea to make regular backups of <code>/usr/share/owncloud/data/</code> - thank goodness this wasn't wiped out with the rest of the previous install location.</p>
